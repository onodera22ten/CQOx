# CQOx Configuration - NASA/Google++ Standard
# Environment: Production

# ========================================
# Server Configuration
# ========================================
PORT=8080
HOST=0.0.0.0
ENV=production

# ========================================
# Database Configuration (TimescaleDB)
# ========================================
DATABASE_URL=postgresql://cqox_user:${DB_PASSWORD}@timescaledb:5432/cqox_db
DB_PASSWORD=changeme_in_production
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# TimescaleDB specific
TIMESCALE_RETENTION_DAYS=90
TIMESCALE_CHUNK_INTERVAL=7 days

# ========================================
# Redis Configuration
# ========================================
REDIS_URL=redis://redis:6379/0
REDIS_PASSWORD=changeme_in_production
REDIS_MAX_CONNECTIONS=50

# ========================================
# Security Configuration
# ========================================
# JWT
JWT_SECRET_KEY=changeme_generate_secure_32char_key
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=60
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# API Keys
API_KEY_HEADER=X-API-Key
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_WINDOW_SECONDS=60

# CORS
ALLOWED_ORIGINS=https://yourdomain.com,https://app.yourdomain.com
CORS_ALLOW_CREDENTIALS=true

# Encryption
DATA_ENCRYPTION_KEY=changeme_32char_encryption_key
FERNET_KEY=changeme_fernet_key_for_encryption

# ========================================
# Vault Configuration (Secret Management)
# ========================================
VAULT_ADDR=http://vault:8200
VAULT_TOKEN=changeme_vault_token
VAULT_NAMESPACE=cqox
VAULT_ENABLED=true

# ========================================
# Observability Configuration
# ========================================
# Prometheus
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
METRICS_PORT=8081

# Grafana
GRAFANA_PORT=3000
GRAFANA_ADMIN_PASSWORD=changeme_grafana_password

# Loki (Log Aggregation)
LOKI_URL=http://loki:3100
LOKI_ENABLED=true

# Jaeger (Distributed Tracing)
JAEGER_ENABLED=true
JAEGER_AGENT_HOST=jaeger
JAEGER_AGENT_PORT=6831
JAEGER_SAMPLER_TYPE=probabilistic
JAEGER_SAMPLER_PARAM=0.1

# OTLP (OpenTelemetry)
OTLP_ENDPOINT=http://jaeger:4317
OTEL_CONSOLE=false

# Sentry (Error Tracking)
SENTRY_DSN=
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# ========================================
# Application Configuration
# ========================================
# WolframONE
WOLFRAM_PATH=/usr/local/bin/wolframscript
WOLFRAM_ENABLED=true

# File Storage
UPLOAD_DIR=/app/uploads
REPORTS_DIR=/app/reports
MAX_UPLOAD_SIZE_MB=100

# ========================================
# Logging Configuration
# ========================================
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_DIR=/app/logs
LOG_ROTATION=daily
LOG_RETENTION_DAYS=30

# Audit Logging
AUDIT_LOG_ENABLED=true
AUDIT_LOG_DIR=/app/logs/audit

# ========================================
# Performance Configuration
# ========================================
WORKERS=4
WORKER_TIMEOUT=120
KEEP_ALIVE=5

# Caching
CACHE_TTL_SECONDS=1800
CACHE_ENABLED=true

# ========================================
# Backup Configuration
# ========================================
BACKUP_ENABLED=true
BACKUP_DIR=/backups
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=cqox-backups
BACKUP_S3_REGION=us-east-1

# ========================================
# Monitoring & Alerting
# ========================================
ALERT_EMAIL=ops@yourdomain.com
ALERT_SLACK_WEBHOOK=
ALERT_PAGERDUTY_KEY=

# SLO Targets
SLO_AVAILABILITY_TARGET=99.9
SLO_LATENCY_P95_MS=500
SLO_ERROR_RATE_TARGET=0.1

# ========================================
# Feature Flags
# ========================================
FEATURE_NARRATIVE_GENERATION=true
FEATURE_POLICY_OPTIMIZATION=true
FEATURE_AUTOML=false
FEATURE_REALTIME_OPTIMIZATION=false

# ========================================
# Development/Testing
# ========================================
DEBUG=false
TESTING=false
CQOX_DISABLE_METRICS=0
CQOX_DISABLE_TRACING=0
